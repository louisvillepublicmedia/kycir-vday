<!doctype html>
<html lang='en-GB'>
<head>
  <link rel="stylesheet" href="css/style.css">
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="fb:app_id" content="169481433545731" />
  <meta property="og:url" content="http://interactives.kycir.org/vday/results.html" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Operation Spread Love, Not Twitter Hate" />
  <meta property="og:description" content="See how others have turned fiery twitter messages into Valentine's Day cards." />
  <meta property="og:image" content="http://interactives.kycir.org/vday/uploads/kycir-vday-1487040864.png" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@KentuckyCIR">
  <meta name="twitter:creator" content="@act_rational">
  <meta name="twitter:title" content="Operation Spread Love, Not Twitter Hate">
  <meta name="twitter:description" content="See how others have turned fiery twitter messages into Valentine's Day cards.">
  <meta name="twitter:image" content="http://interactives.kycir.org/vday/uploads/kycir-vday-1487040864.png">
  
  <title>Operation Spread Love, Not Twitter Hate</title>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-32037403-7', 'auto');
    ga('send', 'pageview');
  
  </script>
</head>

<body>
  
  <div id="fb-root"></div>
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=169481433545731";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    
    window.twttr = (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0],
        t = window.twttr || {};
      if (d.getElementById(id)) return t;
      js = d.createElement(s);
      js.id = id;
      js.src = "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);
    
      t._e = [];
      t.ready = function(f) {
        t._e.push(f);
      };
    
      return t;
    }(document, "script", "twitter-wjs"));
  </script>
  
  <div id="header" class="row">
    <div class="option col-6">
      <h1>Operation Spread Love, Not Twitter Hate</h1>
    </div>
    <div id="menu" class="option col-3">
      <ul>
        <li><a href="play.html">Play</a></li>
        <li><a class="active" href="results.html">Results</a></li>
      </ul>
    </div>
    <div id="social" class="option col-3">
      <ul>
        <li class="fb-share-button" data-href="http://interactives.kycir.org/vday/results.html" data-layout="button" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Finteractives.kycir.org%2Fvday%2Fresults.html&amp;src=sdkpreparse">Share</a></li>
        <li><a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet">Tweet</a></li>
        <!--<li><a href="http://facebook.com"><img src="img/facebook_logo_sq.png" width="30px" height="30px" alt="Facebook"></a></li>
        <li><a href="http://twitter.com"><img src="img/twitter_logo_sq.png" alt="Twitter" width="30px" height="30px"/></a></li>-->
      </ul>
    </div>
  </div>

  <div id="container" class="container-fluid"></div>
  
  <div id="footer" class="row">
    <div class="col-3">
      <a href="http://kycir.org"><img src="img/kycir-logo.png" alt="kycir logo" /></a>
    </div>
    <div class="col-7">
      <p><em><strong>Operation Spread Love, Not Twitter Hate</strong> is brought to you by the Kentucky Center for Investigative Reporting. To see more of our work, visit <a href="http://kycir.org">kycir.org</a>.</em></p>
      <p><em>If you are experiencing issues with this app, please contact Alexandra Kanik at akanik@kycir.org.</em></p>
    </div>
  </div>
  
  <script id='template' type='text/ractive'>
    
    {{#if featureImage}}
    <div id="feature">
      <img src="{{featureImage}}" alt="feature image" />
      <p class="center">Share this image using this URL: <span class="selectAll" contenteditable="true">{{featureImage}}</span></p>
    </div>
    {{/if}}
    
    <div id="general-pool" class="row">
      <h2 class="center">Browse all submitted valentines:</h2>
      <p class="center"><em>Click a card for easier sharing!</em></p>
      {{#each images}}
        <div class="image-holder col-3">
          <a on-click="activate" href="#{{imageID}}"><img src="uploads/{{imageURL}}" /></a>
        </div>
      {{/each}}
    </div>
  </script>
  
  <script src='scripts/js/ractive.min.js'></script>
  <script src='scripts/js/jquery-3.1.1.min.js'></script>
  <script src='scripts/js/jquery.profanityfilter.min.js'></script>
  
  <script>
    
    var images = [];
    
    $('.selectAll').focus(function(){
      $(this).select();
    });
    
    $.getJSON( 'data/all-images.json', function( data ) {
      images = data;
          
      ractive = new Ractive({
        el: '#container',
        template: '#template',
        data: { 
          cards: 'no cards',
          images: images
        }
      });
    
    
      var urlHash, imageID, imageURL;
      urlHash = window.location.hash;
      if(urlHash){
        imageID = urlHash.replace('#','');
        imageURL = 'http://interactives.kycir.org/vday/uploads/' + imageID + '.png';
        ractive.set('featureImage',imageURL);
      }else{
        
      }
      
      ractive.on('activate', function(event){
        var imageURL = 'http://interactives.kycir.org/vday/uploads/' + event.context.imageURL;
        ractive.set('featureImage', imageURL);
                
        $('html, body').animate({
          scrollTop: $("#feature").offset().top
        }, 1000);
      });
        
    });
    
  </script>
  
</body>
</html>